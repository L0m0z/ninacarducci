!function($){$.fn.mauGallery=function(t){var t=$.extend($.fn.mauGallery.defaults,t),e=[];return this.each(function(){$.fn.mauGallery.methods.createRowWrapper($(this)),t.lightBox&&$.fn.mauGallery.methods.createLightBox($(this),t.lightboxId,t.navigation),$.fn.mauGallery.listeners(t),$(this).children(".gallery-item").each(function(){var n=$(this);$.fn.mauGallery.methods.responsiveImageItem(n),$.fn.mauGallery.methods.moveItemInRowWrapper(n),$.fn.mauGallery.methods.wrapItemInColumn(n,t.columns);var i=n.data("gallery-tag");t.showTags&&void 0!==i&&-1===e.indexOf(i)&&e.push(i)}),t.showTags&&$.fn.mauGallery.methods.showItemTags($(this),t.tagsPosition,e),$(this).fadeIn(500)})},$.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},$.fn.mauGallery.listeners=function(t){$(".gallery-item").on("click",function(){t.lightBox&&"IMG"===$(this).prop("tagName")?$.fn.mauGallery.methods.openLightBox($(this),t.lightboxId):void 0}),$(".gallery").on("click",".nav-link",$.fn.mauGallery.methods.filterByTag),$(".gallery").on("click",".mg-prev",()=>$.fn.mauGallery.methods.prevImage(t.lightboxId)),$(".gallery").on("click",".mg-next",()=>$.fn.mauGallery.methods.nextImage(t.lightboxId))},$.fn.mauGallery.methods={createRowWrapper:t=>{t.children().first().hasClass("row")||t.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn:(t,e)=>{if("number"==typeof e)t.wrap(`<div class='item-column mb-4 col-${Math.ceil(12/e)}'></div>`);else if("object"==typeof e){let n="";e.xs&&(n+=` col-${Math.ceil(12/e.xs)}`),e.sm&&(n+=` col-sm-${Math.ceil(12/e.sm)}`),e.md&&(n+=` col-md-${Math.ceil(12/e.md)}`),e.lg&&(n+=` col-lg-${Math.ceil(12/e.lg)}`),e.xl&&(n+=` col-xl-${Math.ceil(12/e.xl)}`),t.wrap(`<div class='item-column mb-4${n}'></div>`)}else console.error(`Columns should be defined as numbers or objects. ${typeof e} is not supported.`)},moveItemInRowWrapper:t=>{t.appendTo(".gallery-items-row")},responsiveImageItem:t=>{"IMG"===t.prop("tagName")&&t.addClass("img-fluid")},openLightBox:(t,e)=>{$(`#${e}`).find(".lightboxImage").attr("src",t.attr("src")),$(`#${e}`).modal("toggle")},prevImage:()=>{let t=null;$("img.gallery-item").each(function(){$(this).attr("src")===$(".lightboxImage").attr("src")&&(t=$(this))});let e=$(".tags-bar span.active-tag").data("images-toggle"),n=[];("all"===e?$(".item-column"):$(".item-column").filter(function(){return $(this).children("img").data("gallery-tag")===e})).each(function(){$(this).children("img").length&&n.push($(this).children("img"))});let i=n.findIndex(e=>e.attr("src")===t.attr("src"))-1,o=n[i]||n[n.length-1];$(".lightboxImage").attr("src",$(o).attr("src"))},nextImage:()=>{let t=null;$("img.gallery-item").each(function(){$(this).attr("src")===$(".lightboxImage").attr("src")&&(t=$(this))});let e=$(".tags-bar span.active-tag").data("images-toggle"),n=[];("all"===e?$(".item-column"):$(".item-column").filter(function(){return $(this).children("img").data("gallery-tag")===e})).each(function(){$(this).children("img").length&&n.push($(this).children("img"))});let i=n.findIndex(e=>e.attr("src")===t.attr("src"))+1,o=n[i]||n[0];$(".lightboxImage").attr("src",$(o).attr("src"))},createLightBox:(t,e,n)=>{t.append(`<div class="modal fade" id="${e?e:"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-body">${n?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}<img class="lightboxImage img-fluid" alt="Contenu de l'image affichÃ©e dans la modale au clique"/>${n?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;">></div>':'<span style="display:none;" />'}</div></div></div></div>`)},showItemTags:(t,e,n)=>{let i='<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';$.each(n,function(t,e){i+=`<li class="nav-item active"><span class="nav-link"  data-images-toggle="${e}">${e}</span></li>`});let o=`<ul class="my-4 tags-bar nav nav-pills">${i}</ul>`;"bottom"===e?t.append(o):"top"===e?t.prepend(o):console.error(`Unknown tags position: ${e}`)},filterByTag:function(){if($(this).hasClass("active-tag"))return;$(".active.active-tag").removeClass("active active-tag"),$(this).addClass("active-tag active");let t=$(this).data("images-toggle");$(".gallery-item").each(function(){$(this).parents(".item-column").hide(),"all"===t||$(this).data("gallery-tag")===t?$(this).parents(".item-column").show(300):""})}}}(jQuery);
